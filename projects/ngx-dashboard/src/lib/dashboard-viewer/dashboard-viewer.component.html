<!-- Dashboard viewer - read-only grid -->
<div class="grid top-grid" #gridElement>
  @for (cell of cells(); track cell.widgetId) {
    <lib-cell
      class="grid-cell"
      [widgetId]="cell.widgetId"
      [cellId]="cell.cellId"
      [isEditMode]="false"
      [draggable]="false"
      [row]="cell.row"
      [column]="cell.col"
      [rowSpan]="cell.rowSpan"
      [colSpan]="cell.colSpan"
      [flat]="cell.flat"
      [widgetFactory]="cell.widgetFactory"
      [widgetState]="cell.widgetState"
    >
    </lib-cell>
  }
</div>

<!-- Selection overlay grid - mirror of main grid for cell selection -->
@if (enableSelection()) {
  <div class="selection-overlay-grid">
    @for (row of rowNumbers(); track row) {
      @for (col of colNumbers(); track col) {
        <div
          class="selection-ghost-cell"
          [class.selected]="isCellSelected(row, col)"
          [class.selecting]="isSelecting()"
          [style.grid-row]="row"
          [style.grid-column]="col"
          (mousedown)="onGhostCellMouseDown($event, row, col)"
          (mouseenter)="onGhostCellMouseEnter(row, col)"
        ></div>
      }
    }
  </div>
}
