@let w = svgWidth(); @let h = svgHeight(); @let cy = centerY(); @let pct =
percent();

<svg
  [attr.width]="w"
  [attr.height]="h"
  [attr.viewBox]="'0 0 ' + w + ' ' + h"
  class="gauge-svg"
  xmlns="http://www.w3.org/2000/svg"
>
  <title [attr.id]="titleId">{{ title() }}</title>
  @if (description()) {
  <desc [attr.id]="descId">{{ description() }}</desc>
  }

  <defs>
    <clipPath id="semi-clip">
      <rect x="0" y="0" [attr.width]="w" [attr.height]="cy" />
    </clipPath>
  </defs>

  <g clip-path="url(#semi-clip)">
    <path
      [attr.d]="backgroundArcPath()"
      pathLength="100"
      fill="none"
      class="gauge-background"
      [attr.stroke-width]="outerThickness()"
      stroke-linecap="butt"
    />

    <path
      [attr.d]="backgroundArcPath()"
      pathLength="100"
      fill="none"
      class="gauge-value"
      [attr.stroke]="valueColor()"
      [attr.stroke-width]="outerThickness()"
      stroke-linecap="butt"
      [attr.stroke-dasharray]="pct + ' 100'"
    />

    @for (segment of segmentPaths(); track segment.path) {
    <path
      [attr.d]="segment.path"
      fill="none"
      [attr.stroke]="segment.color"
      [attr.stroke-width]="innerThickness()"
      stroke-linecap="butt"
      class="gauge-segment"
    />
    }
  </g>
</svg>
