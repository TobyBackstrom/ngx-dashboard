<div class="dashboard-viewport-container">
  <div class="dashboard-wrapper">
    <ngx-dashboard
      #dashboard
      [dashboardData]="dashboardConfig"
      [editMode]="editMode()"
      [reservedSpace]="dashboardReservedSpace()"
      [enableSelection]="selectMode()"
      (selectionComplete)="onSelectionComplete($event)"
    >
    </ngx-dashboard>
  </div>

  @if (editMode()) {
  <ngx-dashboard-widget-list class="widget-list"></ngx-dashboard-widget-list>
  }
</div>

<!-- Selection Mode: Cancel Button -->
@if (selectMode()) {
<button
  mat-fab
  class="cancel-selection-fab"
  (click)="cancelSelect()"
  matTooltip="Cancel Selection (ESC)"
  i18n-matTooltip="@@demo.dashboard.cancelSelectionEsc"
  matTooltipPosition="left"
  color="warn"
>
  <mat-icon>close</mat-icon>
</button>
}

<!-- Dashboard FAB with Speed Dial -->
@if (!selectMode()) {
<app-dashboard-fab
  #fab
  (editModeToggle)="onEditModeToggle()"
  (exportToFile)="onExportToFile()"
  (importFromFile)="onImportFromFile()"
  (saveToLocalStorage)="onSaveToLocalStorage()"
  (loadFromLocalStorage)="onLoadFromLocalStorage()"
  (clearDashboard)="onClearDashboard()"
  (resetToDefault)="onResetToDefault()"
  (selectToggle)="onSelectToggle()"
></app-dashboard-fab>
}
