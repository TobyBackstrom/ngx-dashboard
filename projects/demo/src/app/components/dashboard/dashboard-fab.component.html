<!-- Speed Dial Container -->
<div class="speed-dial-container">
  <!-- Speed Dial Actions (appear when open) -->
  @if (isSpeedDialOpen()) {
  <div class="speed-dial-actions">
    <!-- File Operations -->
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('export')"
      matTooltip="Export to File"
      i18n-matTooltip="@@demo.dashboard.exportToFile"
      matTooltipPosition="left"
    >
      <mat-icon>file_download</mat-icon>
    </button>

    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('import')"
      matTooltip="Import from File"
      i18n-matTooltip="@@demo.dashboard.importFromFile"
      matTooltipPosition="left"
    >
      <mat-icon>file_upload</mat-icon>
    </button>

    <!-- Local Storage Operations -->
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('save')"
      matTooltip="Save to Browser"
      i18n-matTooltip="@@demo.dashboard.saveToBrowser"
      matTooltipPosition="left"
    >
      <mat-icon>arrow_circle_down</mat-icon>
    </button>

    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('load')"
      matTooltip="Load from Browser"
      i18n-matTooltip="@@demo.dashboard.loadFromBrowser"
      matTooltipPosition="left"
    >
      <mat-icon>arrow_circle_up</mat-icon>
    </button>

    <!-- Reset to Default -->
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('reset')"
      matTooltip="Reset to Default"
      i18n-matTooltip="@@demo.dashboard.resetToDefault"
      matTooltipPosition="left"
    >
      <mat-icon>restore</mat-icon>
    </button>

    <!-- Clear Dashboard -->
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('clear')"
      matTooltip="Clear Dashboard"
      i18n-matTooltip="@@demo.dashboard.clearDashboard"
      matTooltipPosition="left"
      color="warn"
    >
      <mat-icon>delete</mat-icon>
    </button>

    <!-- Area Selection (only available in view mode) -->
    @if (!editMode()) {
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('select')"
      [matTooltip]="getSelectModeTooltip()"
      matTooltipPosition="left"
      [color]="selectMode() ? 'accent' : undefined"
    >
      <mat-icon>{{ selectMode() ? "close" : "select_all" }}</mat-icon>
    </button>
    }

    <!-- Edit/View Mode Toggle -->
    <button
      mat-mini-fab
      class="speed-dial-action"
      (click)="onAction('editMode')"
      [matTooltip]="getEditModeTooltip()"
      matTooltipPosition="left"
      [color]="editMode() ? 'accent' : 'primary'"
    >
      <mat-icon>{{ editMode() ? "visibility" : "edit" }}</mat-icon>
    </button>
  </div>
  }

  <!-- Main FAB (always visible) -->
  <button
    mat-fab
    class="main-fab"
    (click)="toggleSpeedDial()"
    [matTooltip]="getMainFabTooltip()"
    matTooltipPosition="left"
    color="primary"
  >
    <mat-icon [class.rotated]="isSpeedDialOpen()">
      {{ isSpeedDialOpen() ? "close" : "dashboard_customize" }}
    </mat-icon>
  </button>
</div>

<!-- Backdrop (closes speed dial when clicked) -->
@if (isSpeedDialOpen()) {
<div
  class="speed-dial-backdrop"
  (click)="closeSpeedDial()"
  (keyup.escape)="closeSpeedDial()"
  tabindex="0"
  role="button"
  aria-label="Close speed dial menu"
  i18n-aria-label="@@demo.dashboard.closeSpeedDialMenu"></div>
}
